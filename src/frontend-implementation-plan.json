{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Resolve frontend build/deploy issues, ensure production asset reliability, and add deploy guide",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Fix frontend build/runtime issues that block production build/deploy and ensure required routes render without errors.",
      "acceptanceCriteria": [
        "A production build completes successfully with no TypeScript, bundler, or Motoko compile errors.",
        "A deploy/publish run completes successfully (no deployment error) and outputs a live URL/canister front-end that loads in the browser.",
        "The home page and at least these routes load without runtime errors: /, /about, /services, /projects, /contact, /calculator, /subsidies, /how-it-works."
      ],
      "file_operations": [
        {
          "path": "frontend/src/lib/assets.ts",
          "operation": "create",
          "description": "Add a small helper to generate correct production-safe static asset URLs (respecting any configured base path) so the app works when deployed under different base prefixes."
        },
        {
          "path": "frontend/src/lib/brand.ts",
          "operation": "modify",
          "description": "Remove non-deterministic cache-busting (Date.now()) and build the brand logo URL via the shared asset URL helper to prevent broken logo paths and stabilize production builds."
        },
        {
          "path": "frontend/src/components/home/HeroSlider.tsx",
          "operation": "modify",
          "description": "Update slide image src values to use the shared asset URL helper so hero images resolve correctly in production deployments."
        },
        {
          "path": "frontend/src/lib/solarKwImages.ts",
          "operation": "modify",
          "description": "Update kW-mapped image paths and fallback image path to use the shared asset URL helper so calculator imagery resolves correctly after deployment."
        },
        {
          "path": "frontend/src/pages/HowItWorksPage.tsx",
          "operation": "modify",
          "description": "Update the working diagram image src to use the shared asset URL helper to avoid 404s in production for deep-linked routes."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Review and adjust router configuration as needed for production stability (e.g., base handling and any missing router options) so navigation to required routes does not cause runtime errors after deployment."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Add an English, project-local publish/deploy guide with exact commands, prerequisites, and a verification checklist.",
      "acceptanceCriteria": [
        "Repository includes an English deployment guide (e.g., README section) with step-by-step commands to build and deploy.",
        "The guide includes a verification checklist (e.g., which URLs/routes to open) to confirm the deployment is successful."
      ],
      "file_operations": [
        {
          "path": "frontend/DEPLOYMENT.md",
          "operation": "create",
          "description": "Document prerequisites and exact commands to build and publish on the Internet Computer (including a post-deploy verification checklist covering: /, /about, /services, /projects, /contact, /calculator, /subsidies, /how-it-works)."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Ensure deployed site serves static assets correctly and header/footer render without broken images in production.",
      "acceptanceCriteria": [
        "After deployment, the SiteHeader and SiteFooter render without broken image icons.",
        "Static assets referenced from the UI load successfully in the deployed environment (no 404s for key images/styles/scripts during normal navigation)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/SiteHeader.tsx",
          "operation": "modify",
          "description": "Ensure the header logo uses the brand logo URL built via the shared asset URL helper and retains graceful fallback rendering when the asset fails to load."
        },
        {
          "path": "frontend/src/components/SiteFooter.tsx",
          "operation": "modify",
          "description": "Ensure the footer logo uses the brand logo URL built via the shared asset URL helper and retains graceful fallback rendering when the asset fails to load."
        },
        {
          "path": "frontend/public/assets/generated/gkv-logo.dim_512x512.png",
          "operation": "create",
          "description": "Ensure the configured brand logo file exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/gkv-hero-banner-1.dim_1600x900.png",
          "operation": "create",
          "description": "Ensure this referenced hero image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/gkv-hero-banner-2.dim_1600x900.png",
          "operation": "create",
          "description": "Ensure this referenced hero image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/gkv-hero-banner-3.dim_1600x900.png",
          "operation": "create",
          "description": "Ensure this referenced hero image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/grid-connected-working-diagram-hindi.dim_1400x900.png",
          "operation": "create",
          "description": "Ensure this referenced infographic image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/solar-kw-02.dim_1200x600.png",
          "operation": "create",
          "description": "Ensure this referenced calculator image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/solar-kw-05.dim_1200x600.png",
          "operation": "create",
          "description": "Ensure this referenced calculator image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/solar-kw-10.dim_1200x600.png",
          "operation": "create",
          "description": "Ensure this referenced calculator image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/solar-kw-20.dim_1200x600.png",
          "operation": "create",
          "description": "Ensure this referenced calculator image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/solar-kw-50.dim_1200x600.png",
          "operation": "create",
          "description": "Ensure this referenced calculator image exists in the deployed static asset bundle at this exact path."
        },
        {
          "path": "frontend/public/assets/generated/gkv-project-01.dim_1200x800.png",
          "operation": "create",
          "description": "Ensure this referenced fallback/project image exists in the deployed static asset bundle at this exact path."
        }
      ]
    }
  ]
}